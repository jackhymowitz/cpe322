<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pyexample: Lesson 3: Python</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">pyexample
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Lesson 3: Python </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li><a href="https://en.wikipedia.org/wiki/Python_(programming_language)">Python</a><ul>
<li><a href="https://en.wikipedia.org/wiki/CPython">CPython</a></li>
<li><a href="https://en.wikipedia.org/wiki/Anaconda_(Python_distribution)">Anaconda</a></li>
<li><a href="https://en.wikipedia.org/wiki/Keyboard_interrupt">Keyboard interrupt</a></li>
<li><a href="https://en.wikipedia.org/wiki/Control-C">Control-C</a></li>
</ul>
</li>
<li><a href="https://docs.python.org/3/library/2to3.html">2to3</a></li>
<li><a href="https://en.wikipedia.org/wiki/Pip_(package_manager)">pip</a></li>
<li><a href="https://en.wikipedia.org/wiki/Unicode">Unicode</a></li>
<li><a href="https://gpiozero.readthedocs.io/en/stable">GPIO Zero</a></li>
<li><a href="http://abyz.me.uk/rpi/pigpio">pigpio</a></li>
<li><a href="https://en.wikipedia.org/wiki/PyPy">PyPy</a></li>
<li><a href="https://en.wikipedia.org/wiki/MicroPython">MicroPython</a></li>
<li><a href="https://en.wikipedia.org/wiki/CircuitPython">CircuitPython</a></li>
<li><a href="https://en.wikipedia.org/wiki/Doxygen">Doxygen</a></li>
</ul>
<h2>Lab 3A: Python</h2>
<ul>
<li>If Python has not been installed on Windows 10, <a href="https://www.python.org/downloads/windows/">download</a> and install the latest version of Python 3</li>
<li>On Windows 10, edit path in "System Properties &gt; Advanced &gt; Environment Variables" and add <div class="fragment"><div class="line">C:\Users\...\AppData\Local\Programs\Python\Python... </div><div class="line">C:\Users\...\AppData\Local\Programs\Python\Python...\Scripts</div></div><!-- fragment --></li>
<li>Open Git Bash on Windows 10, run Python and install/upgrade Python packages with pip <div class="fragment"><div class="line">$ python -i</div><div class="line">&gt;&gt;&gt; import math</div><div class="line">&gt;&gt;&gt; math.sqrt(64)</div><div class="line">8.0</div><div class="line">&gt;&gt;&gt; exit()</div><div class="line">$ python -m pip install --upgrade pip</div><div class="line">$ pip install jdcal astral geopy</div><div class="line">$ cd</div><div class="line">$ cd iot</div><div class="line">$ git pull</div><div class="line">$ cd lesson3</div><div class="line">$ 2to3 2example.py</div><div class="line">$ python julian.py</div><div class="line">$ python date_example.py</div><div class="line">$ python datetime_example.py</div><div class="line">$ python time_example.py</div><div class="line">$ python sun.py &#39;New York&#39;</div><div class="line">$ python sun.py &#39;Beijing&#39;</div><div class="line">$ python sun.py &#39;New Delhi&#39;</div><div class="line">$ python moon.py</div><div class="line">$ python coordinates.py &#39;SC Williams Library&#39;</div><div class="line">$ python address.py &#39;40.74480675, -74.02532862031404&#39;</div><div class="line">$ python documentstats.py document.txt</div></div><!-- fragment --> <h3>NOTE: Raspberry Pi OS (or macOS/Linux) has both Python 2 and Python 3 already preinstalled</h3>
</li>
</ul>
<h3>WARNING: Don't upgrade the preinstalled Python or PIP on Raspberry Pi OS</h3>
<ul>
<li>Run pip3 to install/upgrade packages, update the IoT repository, and run Python 3 programs <div class="fragment"><div class="line">$ sudo pip3 install -U jdcal astral geopy</div><div class="line">$ cd iot</div><div class="line">$ git pull</div><div class="line">$ cd lesson3</div><div class="line">$ 2to3 2example.py</div><div class="line">$ python3 julian.py</div><div class="line">$ python3 date_example.py</div><div class="line">$ python3 datetime_example.py</div><div class="line">$ python3 time_example.py</div><div class="line">$ python3 sun.py &#39;New York&#39;</div><div class="line">$ python3 sun.py &#39;Beijing&#39;</div><div class="line">$ python3 sun.py &#39;New Delhi&#39;</div><div class="line">$ python3 moon.py</div><div class="line">$ python3 coordinates.py &#39;SC Williams Library&#39;</div><div class="line">$ python3 address.py &#39;40.74480675, -74.02532862031404&#39;</div><div class="line">$ python3 documentstats.py document.txt</div></div><!-- fragment --> ### On Raspberry Pi only <div class="fragment"><div class="line">$ python3 system_info.py</div></div><!-- fragment --> ### Run ifconfig on Raspberry Pi (macOS or Linux) or ipconfig on Windows to find IP address <div class="fragment"><div class="line">$ ifconfig</div></div><!-- fragment --> <h3>Run <a href="https://en.wikipedia.org/wiki/Network_socket">network socket</a> server from a Terminal, and run network socket client from ANOTHER Terminal of the same Raspberry Pi or a different one on the same subnetwork using the IP address as a string in single quotes</h3>
</li>
</ul>
<ul>
<li>'The Server IP Address' is a placeholder to be replaced with a real IP address such as 192.168.1.200 <div class="fragment"><div class="line">$ python3 socket_server.py</div><div class="line">$ python3 socket_client.py &#39;The Server IP Address&#39;</div></div><!-- fragment --> <h2>Lab 3B: Breadboard</h2>
</li>
</ul>
<h3>1. Connect the breadboard components (including a 1&mu;F capacitor) to Raspberry Pi 3V3, GND, GPIO 18, GPIO 24, and GPIO 25 using five DuPont male-to-female jump wires</h3>
<div class="image">
<img src="https://github.com/kevinwlu/iot/blob/master/lesson3/ldr_bb.png" alt="ldr_bb.png"/>
</div>
<p>### 2. Run the following three python programs </p><div class="fragment"><div class="line">$ python3 blink.py</div><div class="line">$ python3 manual.py</div><div class="line">$ python3 auto.py</div></div><!-- fragment --> <h3>3. Make a new directory, copy files to the current directory (in a single dot as opposed to the parent directory in double dots), edit (replace GMAIL_ADDRESS, RECIPIENT_EMAIL, GMAIL_USERNAME, and GOOGLE_APP_PASSWORD)</h3>
<ul>
<li>test_email.py doesn't require the breadboard</li>
<li>hello.py requires a button to be pressed for sending an email <div class="fragment"><div class="line">$ cd</div><div class="line">$ mkdir demo</div><div class="line">$ cd demo</div><div class="line">$ cp ~/iot/lesson3/test_email.py .</div><div class="line">$ nano test_email.py</div><div class="line">$ python3 test_email.py</div><div class="line">$ cp ~/iot/lesson3/hello.py .</div><div class="line">$ nano hello.py</div><div class="line">$ python3 hello.py</div></div><!-- fragment --> <h2>Lab 3C: Remote GPIO</h2>
</li>
</ul>
<p>### 1. Launch the pigpio <a href="https://en.wikipedia.org/wiki/Daemon_(computing)">daemon</a> using the âˆ’n flag to allow connections from a specific IP address of a controlling computer without quotation marks </p><div class="fragment"><div class="line">pi@raspberrypi:~ $ sudo pigpiod -n &lt;CONTROLLING_ADDRESS&gt;</div></div><!-- fragment --><p> ### 2. If the controlling computer is on macOS (sudo pip3 install) or Windows (pip install), install GPIO Zero and pigpio, git clone the iot repository, go to the iot/lesson3 directory, and run the Python program with the environment variable PIGPIO_ADDR set to the IP address of the controlled Raspberry Pi </p><div class="fragment"><div class="line">$ sudo pip3 install gpiozero pigpio</div><div class="line">$ git clone https://github.com/kevinwlu/iot.git</div><div class="line">$ cd ~/iot/lesson3</div><div class="line">$ PIGPIO_ADDR=&lt;CONTROLLED_ADDRESS&gt; python3 led.py</div></div><!-- fragment --><p> ### 3. If the controlling computer is another Raspberry Pi, go to the iot/lesson3 directory and run the Python program with the environment variables GPIOZERO_PIN_FACTORY set to pigpio since the default pin factory is RPi.GPIO </p><div class="fragment"><div class="line">$ GPIOZERO_PIN_FACTORY=pigpio PIGPIO_ADDR=&lt;CONTROLLED_ADDRESS&gt; python3 led.py</div></div><!-- fragment --> <h2>Lab 3D: 1-Wire</h2>
<h3>Connect DS18B20 to Raspberry Pi and run the Python program:</h3>
<ul>
<li>GND to GND</li>
<li>VDD to 3.3V or 5V</li>
<li>DQ to GPIO 4 (the 4th pin from the left of the bottom row) and through a 4.7k&Omega; resistor to VDD</li>
</ul>
<div class="image">
<img src="https://github.com/kevinwlu/iot/blob/master/lesson3/1-wire_bb.png" alt="1-wire_bb.png"/>
</div>
<div class="fragment"><div class="line">pi@raspberrypi:~/iot/lesson3 $ python3 <a class="code" href="namespacetemperature.html">temperature</a>.py</div></div><!-- fragment --><p>## Lab 3E: PyPy </p><div class="fragment"><div class="line">$ cd ~/iot/lesson3/pypy</div><div class="line">$ gcc -o test test.c</div><div class="line">$ time ./test</div><div class="line">$ time pypy test.py</div><div class="line">$ time python test.py</div><div class="line">$ time python3 test.py</div><div class="line">$ pypy -m cProfile test.py</div><div class="line">$ python -m cProfile test.py</div><div class="line">$ python3 -m cProfile test.py</div></div><!-- fragment --><p> ## Lab 3F: Doxygen </p><div class="fragment"><div class="line">$ sudo apt install doxygen html2text</div><div class="line">$ cd ~/demo</div><div class="line">$ cp ~/iot/lesson3/pyexample.py .</div><div class="line">$ doxygen -g doxygen.config</div><div class="line">$ nano doxygen.config</div></div><!-- fragment --> <blockquote class="doxtable">
<p>PROJECT_NAME = "pyexample" </p>
</blockquote>
<blockquote class="doxtable">
<p>OPTIMIZE_OUTPUT_JAVA = YES </p>
</blockquote>
<div class="fragment"><div class="line">$ doxygen doxygen.config</div><div class="line">$ cd html</div><div class="line">$ html2text annotated.html</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
